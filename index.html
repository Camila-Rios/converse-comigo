<!-- Simulador WhatsApp - P√°gina de Convers√£o
Single-file HTML + TailwindCSS + JS
- Simula chat com mensagens aparecendo em sequ√™ncia
- "Digitando..." indicator
- Pr√©via (imagem) escolhida a dedo (placeholder)
- √Åudio da modelo (bot√£o play)
- Gera chave PIX e QR (usa api.qrserver.com para imagem QR)
- Tenta n√£o levar pro checkout: primeiro op√ß√£o PIX; se n√£o pagar -> checkout

Substitua os placeholders (imagem, audio, checkout URL, dados da conta) conforme necess√°rio.
-->

<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chat - Pr√©via Privada</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Pequenas estiliza√ß√µes para parecer WhatsApp */
    body { background: linear-gradient(180deg,#0f172a 0%, #071133 100%); }
    .chat-frame { max-width: 420px; width:100%; height:90vh; border-radius:16px; overflow:hidden; box-shadow:0 10px 30px rgba(2,6,23,.6); }
    .messages { height: calc(90vh - 140px); overflow:auto; padding:16px; }
    .bubble { display:inline-block; padding:10px 14px; border-radius:16px; max-width:78%; line-height:1.25; }
    .from-me { background:#DCF8C6; color:#082; border-bottom-right-radius:4px; }
    .from-her { background:#ffffff11; color:#fff; border-bottom-left-radius:4px; }
    .typing { font-style:italic; opacity:.9; }
    .topbar { background:linear-gradient(90deg,#0ea5a0,#06b6d4); }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
  <div class="chat-frame bg-gradient-to-b from-neutral-900 to-neutral-800 w-full">
    <!-- Top bar (profile) -->
    <div class="topbar flex items-center gap-3 p-4 text-white">
      <img id="modelAvatar" src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=200&auto=format&fit=crop&crop=faces" alt="modelo" class="w-12 h-12 rounded-full object-cover border-2 border-white/40">
      <div>
        <div class="font-semibold">Camila ‚ú®</div>
        <div class="text-sm opacity-90">Online ‚Ä¢ √öltima vez h√° 2 min</div>
      </div>
      <div class="ml-auto text-right">
        <div class="text-xs opacity-80">VIP ‚Ä¢ R$19,90</div>
        <button id="openPreviewBtn" class="mt-1 bg-white/10 hover:bg-white/20 px-3 py-1 rounded text-xs">Pr√©via</button>
      </div>
    </div>

    <!-- Messages -->
    <div id="messages" class="messages text-sm text-white">
      <!-- mensagens injetadas via JS -->
    </div>

    <!-- Composer / bottom area -->
    <div class="px-4 py-3 bg-neutral-900/60 flex items-center gap-3">
      <button id="playAudio" class="bg-white/10 hover:bg-white/20 px-3 py-2 rounded">‚ñ∂Ô∏è √Åudio da Camila</button>
      <div class="flex-1">
        <input id="fakeInput" type="text" placeholder="Escreva uma mensagem..." readonly class="w-full bg-neutral-800/60 placeholder:text-neutral-300 px-3 py-2 rounded" />
      </div>
      <button id="startPixFlow" class="bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-2 rounded">Quero VIP</button>
    </div>
  </div>

  <!-- Modal preview + PIX -->
  <div id="modal" class="fixed inset-0 bg-black/60 hidden items-center justify-center p-4">
    <div class="bg-white/5 backdrop-blur-md rounded-xl max-w-3xl w-full overflow-hidden">
      <div class="flex items-center justify-between p-4 border-b border-white/10">
        <div class="flex items-center gap-3">
          <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=200&auto=format&fit=crop&crop=faces" alt="modelo" class="w-12 h-12 rounded-full object-cover border-2 border-white/20">
          <div>
            <div class="font-semibold">Camila</div>
            <div class="text-xs opacity-80">Pr√©via escolhida a dedo</div>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button id="closeModal" class="text-sm px-3 py-1 rounded bg-white/5">Fechar</button>
        </div>
      </div>
      <div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Preview image -->
        <div class="rounded overflow-hidden">
          <img id="previewImage" src="https://images.unsplash.com/photo-1517841905240-472988babdf9?q=80&w=800&auto=format&fit=crop" alt="pr√©via" class="w-full object-cover h-64">
        </div>

        <!-- PIX / pagamento -->
        <div class="text-sm text-white flex flex-col gap-3">
          <div class="bg-neutral-900/40 p-3 rounded">
            <div class="font-semibold">Pagar via PIX (recomendado)</div>
            <div class="text-xs opacity-80">R$19,90 ‚Ä¢ Chave √∫nica gerada</div>
          </div>

          <div id="pixArea" class="p-3 bg-neutral-900/30 rounded flex flex-col gap-3">
            <div class="flex items-center gap-3">
              <div class="flex-1">
                <div class="text-xs opacity-80">Chave PIX</div>
                <div id="pixKey" class="font-mono break-all">--</div>
              </div>
              <div class="flex flex-col gap-2">
                <button id="copyKey" class="px-3 py-1 bg-white/5 rounded text-sm">Copiar</button>
                <a id="downloadQR" download="pix-qr.png" class="px-3 py-1 bg-white/5 rounded text-sm inline-block">Baixar QR</a>
              </div>
            </div>

            <div class="flex items-center gap-3">
              <img id="pixQR" src="" alt="QR PIX" class="w-36 h-36 bg-white/5 rounded" />
              <div class="flex-1">
                <div class="text-xs opacity-80">Ap√≥s pagar, clique em "J√° paguei"</div>
                <button id="paidBtn" class="mt-3 px-4 py-2 rounded bg-emerald-500 hover:bg-emerald-600 text-white">J√° paguei</button>
                <button id="noPixBtn" class="mt-2 px-4 py-2 rounded bg-amber-500 hover:bg-amber-600 text-white">N√£o tenho PIX</button>
              </div>
            </div>

            <div id="pixStatus" class="text-xs opacity-80">Status: aguardando pagamento...</div>
          </div>

          <div class="p-3">
            <div class="text-xs opacity-80">Se n√£o conseguir pagar com PIX, voc√™ pode finalizar no checkout:</div>
            <a id="checkoutLink" href="#" class="inline-block mt-2 px-4 py-2 bg-blue-600 rounded text-white">Ir para checkout</a>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Hidden audio element (substitua src pelo √°udio real) -->
  <audio id="modelAudio" src="https://www.w3schools.com/html/horse.mp3"></audio>

<script>
// Sequ√™ncia de mensagens (simula√ß√£o)
const messagesData = [
  {from:'her', text:'Oi, amorzinho üòò j√° escolhi a pr√©via perfeita pra voc√™.'},
  {from:'her', text:'T√° afim de ver agora mesmo? Posso liberar por R$19,90.'},
  {from:'her', text:'Se quiser posso mandar um √°udio exclusivo tamb√©m.'},
  {from:'me', text:'Quero ver agora.'}
];

const messagesEl = document.getElementById('messages');
let idx = 0;

function appendBubble(from, html){
  const wrap = document.createElement('div');
  wrap.className = 'mb-3 flex';
  if(from === 'me') wrap.style.justifyContent = 'flex-end';
  const bubble = document.createElement('div');
  bubble.className = 'bubble ' + (from==='me' ? 'from-me' : 'from-her');
  bubble.innerHTML = html;
  wrap.appendChild(bubble);
  messagesEl.appendChild(wrap);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function showTyping(){
  const t = document.createElement('div');
  t.className = 'mb-3 flex from-her';
  t.innerHTML = '<div class="bubble from-her typing">digitando...</div>';
  messagesEl.appendChild(t);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return t;
}

function runSequence(){
  if(idx >= messagesData.length) return;
  const item = messagesData[idx++];
  const typingEl = showTyping();
  const delay = 900 + Math.random()*1600;
  setTimeout(()=>{
    typingEl.remove();
    appendBubble(item.from, item.text);
    // se for √∫ltima mensagem de 'her', abrir modal autom√°tico
    if(idx === messagesData.length){
      setTimeout(()=> document.getElementById('openPreviewBtn').click(), 800);
    }
    runSequence();
  }, delay);
}

runSequence();

// Modal flow
const modal = document.getElementById('modal');
document.getElementById('openPreviewBtn').addEventListener('click', ()=>{
  modal.classList.remove('hidden');
  // gerar PIX quando abrir
  generatePIX();
});
document.getElementById('closeModal').addEventListener('click', ()=> modal.classList.add('hidden'));

// Audio
const audio = document.getElementById('modelAudio');
document.getElementById('playAudio').addEventListener('click', ()=>{
  audio.play();
});

// PIX generation
function generateRandomKey(){
  // Gera uma chave pix fict√≠cia (email-like) - substitua por chave real se quiser
  const names = ['camila.vip','camila.exclusiva','contato.camila'];
  return names[Math.floor(Math.random()*names.length)] + (Math.floor(Math.random()*900)+100) + '@exemplo.com';
}

function buildPixPayload(key, amount, txid){
  // Payload simples para QR; n√£o √© um payload EMV completo, mas serve pra demo
  return `PAY?key=${key}&amount=${amount}&txid=${txid}`;
}

const pixKeyEl = document.getElementById('pixKey');
const pixQREl = document.getElementById('pixQR');
const downloadQR = document.getElementById('downloadQR');
let currentPixKey = '';
let currentTxId = '';

function generatePIX(){
  const key = generateRandomKey();
  const amount = '19.90';
  const txid = 'VIP' + Math.floor(Math.random()*900000+100000);
  currentPixKey = key;
  currentTxId = txid;
  pixKeyEl.textContent = key;
  const payload = buildPixPayload(key, amount, txid);
  // Gerar QR via API p√∫blica (placeholder) - pode substituir por QR do seu gateway
  const qrUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=' + encodeURIComponent(payload);
  pixQREl.src = qrUrl;
  downloadQR.href = qrUrl;
}

// Copy key
document.getElementById('copyKey').addEventListener('click', ()=>{
  navigator.clipboard.writeText(currentPixKey).then(()=>{
    alert('Chave PIX copiada: ' + currentPixKey);
  });
});

// Paid button -> simulate verifying payment
const pixStatus = document.getElementById('pixStatus');
document.getElementById('paidBtn').addEventListener('click', ()=>{
  pixStatus.textContent = 'Verificando pagamento...';
  // simulacao de verifica√ß√£o: 60% chance pago
  setTimeout(()=>{
    const paid = Math.random() < 0.6;
    if(paid){
      pixStatus.textContent = 'Pagamento confirmado ‚úÖ Liberando pr√©via...';
      // libera download / exibe conte√∫do exclusivo
      setTimeout(()=>{
        appendBubble('her','Prontinho, amor! Aqui est√° a pr√©via exclusiva ‚ù§Ô∏è');
        appendBubble('her', '<img src="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?q=80&w=600&auto=format&fit=crop" class="rounded max-w-full"/>');
        modal.classList.add('hidden');
      },800);
    } else {
      pixStatus.textContent = 'Pagamento n√£o encontrado. Se preferir, finalize no checkout.';
      // mostrar checkout CTA
      document.getElementById('checkoutLink').classList.remove('hidden');
    }
  }, 1100);
});

// No PIX -> levar para checkout
document.getElementById('noPixBtn').addEventListener('click', ()=>{
  // exemplo: ir para checkout externo
  const checkoutUrl = 'https://seu-checkout-exemplo.com/checkout?product=vip19_90';
  // abrir em nova aba
  window.open(checkoutUrl, '_blank');
});

// Checkout link
document.getElementById('checkoutLink').href = 'https://seu-checkout-exemplo.com/checkout?product=vip19_90';

</script>
</body>
</html>
